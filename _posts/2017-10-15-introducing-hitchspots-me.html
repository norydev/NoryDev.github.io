<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="categories" content="hitchhiking code">
<meta name="date" content="2017-10-15 00:30:00 +0300">
<meta name="subhead" content="Get Hichwiki spots into MAPS.me">
<meta name="layout" content="blogpost">
<meta name="imgclass" content="vw"><style>body {
  max-width: 980px;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 45px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><title>Introducing Hitchspots.me</title></head><body><article class="markdown-body"><p>I like to go hitchhiking in Europe with my friends. We get together, draw pairs, and race towards a famous spot in a European city. The first team who arrives there by hitchhiking alone is declared winner üèÜ. It&rsquo;s very fun, you can check our track record on our <a href="https://www.somewherexpress.com/">awesome website</a>. üò¨</p>
<p>We organized one of these trips last September (2017), and a few weeks before, I was starting to think about it.</p>
<h2 id="hitchwiki-is-awesome"><a name="user-content-hitchwiki-is-awesome" href="#hitchwiki-is-awesome" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Hitchwiki is Awesome</h2>
<p><a href="http://hitchwiki.org/en/Main_Page">Hitchwiki</a> is the ultimate resource for hitchhikers: there you can find valuable resources about anything hitchhiking related: country and city informations, tips, places to avoid, etc. </p>
<p>There is also a <a href="http://hitchwiki.org/maps/">map</a> with crowd sourced, rated hitchhiking spots everywhere in the world. It&rsquo;s extremely helpful, for example in order to know where to start a new trip, to tell a driver where to drop you, or to find the closest good spot if you get drop in an unexpected place.</p>
<p><img alt="Hitchwiki Spots Map" src="/img/posts/hitchwiki_map.jpg" /></p>
<p>But there is one problem for me with it: I usually don&rsquo;t have an Internet connection when I&rsquo;m hitchhiking. Yes, the European Union has <a href="http://europa.eu/rapid/press-release_MEMO-17-885_en.htm">ended roaming charges</a> but unfortunately, neither my home country Switzerland, nor my residence country Turkey are part of this deal.</p>
<p>Because of that, I can not access the very helpful Hitchwiki spots whenever I leave Turkey or Switzerland without paying way too much money. That&rsquo;s a bummer. üòû</p>
<h2 id="mapsme-is-awesome"><a name="user-content-mapsme-is-awesome" href="#mapsme-is-awesome" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>MAPS.me is awesome</h2>
<p>I use the <a href="https://maps.me/download">MAPS.me</a> application in my everyday life and I love it. It allows you to download maps and navigate without an Internet connection. I also use it when I go Hitchhiking.</p>
<p>MAPS.me has this Bookmarks feature where you can pin a location and write some personal comments about it. I realized earlier this year that those Bookmarks can in fact be exported, but more importantly imported from a KML file.</p>
<p>And that&rsquo;s when it clicked: I should find a way to get Hitchwiki spots as a MAPS.me Bookmarks collection, that I can import while I have an Internet connection, before I go on a trip. </p>
<h2 id="hitchspotsme-brings-them-together"><a name="user-content-hitchspotsme-brings-them-together" href="#hitchspotsme-brings-them-together" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Hitchspots.me brings them together</h2>
<p>SPOILER: I made it and it&rsquo;s dead simple to use!</p>
<ol>
<li>Go to <a href="http://www.hitchspots.me/">Hitchspots.me</a> with your phone (which has MAPS.me installed already)</li>
<li>Enter your trip departure and arrival locations and click the Generate button</li>
<li>It will download the KML file, open it</li>
<li>That&rsquo;s it üéâ</li>
</ol>
<p style="text-align: center"><img src="/img/posts/hitchspots_me_demo.gif" alt="Hitchspots.me demo" /></p>

<p>It will get all the spots that are approximately 10km on each sides of your route. Bookmarks are colored according to their Hitchability rating (from Green ‚Äî Very Good, to Red ‚Äî Very Bad)</p>
<p>If you click on a bookmark, you will get the spot detail: city name, description by the author, average waiting time, and comments.</p>
<p>Oh, and by the way, if you are unsure of your route, you can also download all the spots for an entire country.</p>
<p><img alt="Hitchspots example" src="/img/posts/hitchspots_examples.jpg" /><br />
<div class="legend">Left: spot detail in bookmark, Right: all the spots of a country</div></p>
<h2 id="under-the-hood"><a name="user-content-under-the-hood" href="#under-the-hood" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Under the hood</h2>
<div class="disclaimer">That's the part where it gets technical, so if you are not into coding, you should probably stop reading here, and go enjoy the rest of your day! Happy Hitchhiking! üëçüöó</div>

<p>Let me walk you through my process to create Hitchspots.me. To begin with, all the code is <a href="https://github.com/norydev/hitchspots">Open Source</a>. Hithhiking is all about giving and receiving, so I wanted my code to be Open Source, and use Open data in it.</p>
<p>Ruby is my favorite programming language, so I reached out to it, and started a plain old Ruby project.</p>
<h3 id="what-it-needed-to-do"><a name="user-content-what-it-needed-to-do" href="#what-it-needed-to-do" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>What it needed to do</h3>
<p>First, Hitchwiki maps has an API from which we can retrieve spots data. Without it, it would not really have been possible to build this app. I was going to hit it a lot, so I asked <a href="https://twitter.com/simison">Mikael</a> if it was ok, and he has been very supportive. Shout out to him and the wonderful Hitchwiki community. üôå</p>
<p>Second, as I said earlier, MAPS.me has a bookmark import functionality. So data gathered from Hitchwiki can be transformed to fit a MAPS.me file, which is then importable.</p>
<p>Third, we need to develop the part that figures out which spots to add to a file. My main interest is to gather the spots for a defined trip from point A to point B <sup id="sup-1"><a href="#footnotes-1">1</a></sup>.</p>
<h3 id="getting-the-spots-from-hitchwiki"><a name="user-content-getting-the-spots-from-hitchwiki" href="#getting-the-spots-from-hitchwiki" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Getting the spots from Hitchwiki</h3>
<p>Hitchwiki&rsquo;s API <sup id="sup-2"><a href="#footnotes-2">2</a></sup> has basically two modes: Get a collection of spots, or get the detail of one spot. The payload for a collection of spots is like this:</p>
<pre><code class="json">[{&quot;id&quot;:&quot;355&quot;,&quot;lat&quot;:&quot;51.2029594207479&quot;,&quot;lon&quot;:&quot;4.38469022512436&quot;,&quot;rating&quot;:&quot;2&quot;},
 {&quot;id&quot;:&quot;182&quot;,&quot;lat&quot;:&quot;49.8697605358452&quot;,&quot;lon&quot;:&quot;8.6283928155899&quot;,&quot;rating&quot;:&quot;2&quot;},
 {&quot;id&quot;:&quot;362&quot;,&quot;lat&quot;:&quot;48.4196173897275&quot;,&quot;lon&quot;:&quot;10.6816077232361&quot;,&quot;rating&quot;:&quot;4&quot;}]
</code></pre>

<p>In the end, I would ideally like my ookmarks to contain more information than that, so I will need the payload from a spot detail. But for the first iteration, let&rsquo;s start with this minimal data. It is enough to pin a bookmark on a map and color it according to it&rsquo;s rating.</p>
<p>Hitchwiki&rsquo;s API has several mode for retrieving collections; by city, continent, country or coordinates-bounded area. As my main goal is to get the spots for a trip from point A to point B, my only option would be to use the &ldquo;by area&rdquo; endpoint.</p>
<h3 id="calculating-the-areas-for-a-trip"><a name="user-content-calculating-the-areas-for-a-trip" href="#calculating-the-areas-for-a-trip" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Calculating the areas for a trip</h3>
<p>After a bit of research, I found <a href="http://project-osrm.org/">OSRM</a>, which allows to calculate routes between two points. It&rsquo;s open source, and so far, I&rsquo;ve been pretty satisfied for the results it gave me. </p>
<p>When I started working on Hitchspots.me, it was possible to hit the API described in their <a href="http://project-osrm.org/docs/v5.10.0/api/#general-options">documentation</a> but it seems no longer the case <sup id="sup-3"><a href="#footnotes-3">3</a></sup> (renders a 503 for all requests).</p>
<p><a href="https://www.mapbox.com/">MabBox</a> is using the OSRM material and even paying for some of it&rsquo;s development (<a href="https://github.com/NoryDev/hitchspots/pull/2#issuecomment-324653518">allegedly</a>) so I&rsquo;m happy to use it to calculate routings.</p>
<p>OSRM results are pretty good, because they give enough intermediate points of coordinates, but not too many either.</p>
<p><img alt="OSRM results example" src="/img/posts/osrm_example.jpg" /></p>
<p>From this route, we can calculate a collection of areas around these points, in order to query the Hitchwiki API &ldquo;spots by area&rdquo; endpoint. To do so, I found out adding 0.1 degree (or about 10km) on each side of the point is good enough to cover all the useful spots.</p>
<p><img alt="Zones calculation" src="/img/posts/zones_explained.jpg" /></p>
<p>For a 500km trip, it will mean about 25-40 zones. That means, 25-40 hits of the Hitchwiki API. That can be a long time to wait for the user. From the Hitchwiki maps website, we can know that there are about 25&lsquo;000 spots worldwide. That&rsquo;s not so many. For a first iteration, we could get them all in a JSON file and query the file instead of the real API. We can do that with one hit of the &ldquo;by area&rdquo; endpoint passing -90, 90, -180 and 180 as bounds.</p>
<h3 id="geolocating-departure-and-arrival-locations"><a name="user-content-geolocating-departure-and-arrival-locations" href="#geolocating-departure-and-arrival-locations" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Geolocating departure and arrival locations</h3>
<p>OSRM expects lat/lon coordinates for departure and arrival. But I want users to give me a city name, or an address, not a latitude and longitude.</p>
<p>Open Street Map provides the <a href="http://wiki.openstreetmap.org/wiki/Nominatim">Nominatim</a> tool. Given a string, it will return the details of the n first places it found, ordered by accuracy. The detail about the place includes it&rsquo;s latitude and longitude.</p>
<pre><code class="json">{
  &quot;place_id&quot;: &quot;114173&quot;,
  &quot;licence&quot;: &quot;Data ¬© OpenStreetMap contributors, ODbL 1.0. http://www.openstreetmap.org/copyright&quot;,
  &quot;lat&quot;: &quot;50.938361&quot;,
  &quot;lon&quot;: &quot;6.959974&quot;,
  &quot;display_name&quot;: &quot;Cologne, District de Cologne, Rh√©nanie-du-Nord-Westphalie, Allemagne&quot;,
  &quot;class&quot;: &quot;place&quot;,
  &quot;type&quot;: &quot;city&quot;,
  &quot;importance&quot;: 0.82233722043841,
  // more data
}
</code></pre>

<p>Now a user can enter two locations, and we can pipe our different components to get all the Hitchwiki spots for the route between these two locations:</p>
<ol>
<li>Geolocate Departure and Arrival locations with Nominatim</li>
<li>Pass these coordinates to MapBox to get a route (list of coordinates)</li>
<li>Compute areas around this route</li>
<li>Query the Hitchwiki API (or it&rsquo;s data stored in a JSON file) for each computed area to get a collection of spots</li>
</ol>
<p>What remains is to render them as a MAPS.me Bookmarks collection file.</p>
<h3 id="rendering-the-spots-in-a-mapsme-bookmarks-file"><a name="user-content-rendering-the-spots-in-a-mapsme-bookmarks-file" href="#rendering-the-spots-in-a-mapsme-bookmarks-file" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Rendering the spots in a MAPS.me Bookmarks file</h3>
<p>This <a href="https://support.maps.me/hc/en-us/articles/207895029-How-can-I-import-Bookmarks-">article</a> explains how to import a Bookmarks collection. We can see that MAPS.me accepts both KML and KMZ (zipped KML files). We will go with KML. </p>
<p>To figure out the MAPS.me format, I exported one of my boomarks collection, and it looks like this:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;kml xmlns=&quot;http://earth.google.com/KML/2.2&quot;&gt;
&lt;Document&gt;
  &lt;Style id=&quot;placemark-blue&quot;&gt;
    &lt;IconStyle&gt;
      &lt;Icon&gt;
        &lt;href&gt;http://mapswith.me/placemarks/placemark-blue.png&lt;/href&gt;
      &lt;/Icon&gt;
    &lt;/IconStyle&gt;
  &lt;/Style&gt;
  &lt;!-- More placemark Styles --&gt;
  &lt;name&gt;My places&lt;/name&gt;
  &lt;visibility&gt;1&lt;/visibility&gt;
  &lt;Placemark&gt;
    &lt;name&gt;A great place I went to&lt;/name&gt;
    &lt;description&gt;Contact number
+1-555-33-44-55&lt;/description&gt;
    &lt;TimeStamp&gt;&lt;when&gt;2017-05-17T13:41:44Z&lt;/when&gt;&lt;/TimeStamp&gt;
    &lt;styleUrl&gt;#placemark-red&lt;/styleUrl&gt;
    &lt;Point&gt;&lt;coordinates&gt;6.5652005,46.4674717&lt;/coordinates&gt;&lt;/Point&gt;
    &lt;ExtendedData xmlns:mwm=&quot;http://mapswith.me&quot;&gt;
      &lt;mwm:scale&gt;14&lt;/mwm:scale&gt;
    &lt;/ExtendedData&gt;
  &lt;/Placemark&gt;
  &lt;!-- More Placemarks --&gt;
&lt;/Document&gt;
&lt;/kml&gt;
</code></pre>

<p>For each spot gotten from the Hitchwiki API, we can create a Placemark with coordinates, and styleURL containing a different color tag base on the rating.</p>
<h3 id="making-the-web-application"><a name="user-content-making-the-web-application" href="#making-the-web-application" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Making the web application</h3>
<p>If we pipe all these components together, we have a working first iteration. It is not perfect: if spots are updated on Hitchwiki, we won&rsquo;t get the updated version (as we are using a JSON file with the data instead of the real API), and we only get limited data for a spot, which is it&rsquo;s location and rating.</p>
<p>But that&rsquo;s a working alpha version, so I integrated this code in a new <a href="http://sinatrarb.com/">Sinatra</a> application, made a simple form interface for the user to enter locations and <a href="https://twitter.com/norydev/status/899204874054893568">published</a> it.</p>
<h2 id="second-iteration"><a name="user-content-second-iteration" href="#second-iteration" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Second iteration</h2>
<p>There are a few necessary improvements from here. First, the user doesn&rsquo;t get any feedback if their locations are real places. Second, it would have more value if the bookmark description contained more data from the spot.</p>
<h3 id="places-autocomplete-and-real-time-geolocation"><a name="user-content-places-autocomplete-and-real-time-geolocation" href="#places-autocomplete-and-real-time-geolocation" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Places autocomplete and real time geolocation</h3>
<p>Implementing places autocomplete was easier that I thought: I used <a href="https://github.com/komoot/typeahead-address-photon">this plugin</a> that is doing exactly what I wanted and gets the same Open Street Map data that I used in the first iteration.</p>
<p>Except it does it in the browser and in real time. These coordinates can be sent with the form data directly and the backend doesn&rsquo;t need to call an external API for geolocation anymore.</p>
<p>I kept the backend code as a backup in case the javascript plugin fails for some reasons.</p>
<h3 id="add-more-data-to-the-bookmark-description"><a name="user-content-add-more-data-to-the-bookmark-description" href="#add-more-data-to-the-bookmark-description" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Add more data to the bookmark description</h3>
<p>The Hitchwiki API provides an endpoint to get the detail of a spot, given it&rsquo;s ID (which we get from the &ldquo;by area&rdquo; endpoint). There is no endpoint to retrieve more than one spot detail at a time. A 500km trip in central Europe can quickly mean 100 to 200 spots, so it is not an acceptable solution to hit the Hitchwiki API that many times for a single trip.</p>
<p>As we have seen, the total number of spots is not that high (about 25&lsquo;000), so with the permission of Mikael from Hitchwiki (thanks again), I decided to harvest the entire dataset from Hitchwiki, store it locally, and then query from this local storage. I would also have a CRON job to refresh the data from Hitchwiki once a day.</p>
<p>I opted for a MongoDB storage, for several reasons:</p>
<ol>
<li>I preferred saving the Hitchwiki API payload in a NoSQL storage, as it may change (there are, in fact, already plans to change it).</li>
<li>I could have used a PostgreSQL jsonb column for the raw payload. But it turns out, for my kind of data, a cloud hosting of a MongoDB instance was cheaper.</li>
<li>I had no experience with MongoDB except for a few tutorials, so it was the opportunity to learn about it.</li>
</ol>
<h3 id="sanitizing-the-data"><a name="user-content-sanitizing-the-data" href="#sanitizing-the-data" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Sanitizing the data</h3>
<p>With this done, I quickly added some of this new data to my KML template: description, city name, comments, etc.</p>
<p>But it didn&rsquo;t work. The file would be generated, and MAPS.me would open it, but there would be no Bookmark in it. ü§î</p>
<p>It turns out, the data from Hitchwiki, at least some of it, is not utf-8 encoded and it looks like this breaks MAPS.me. After a few trial and errors, I figured the corrupt data was Windows-1252 encoded. So I passed all of the spots threw a sanitizer and now it worked.</p>
<h2 id="testing-it-out"><a name="user-content-testing-it-out" href="#testing-it-out" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Testing it out</h2>
<p>As I said in the introduction, all of this was triggered by the fact that we were going to go on a Hitchhiking trip with my friend. I finished the second iteration of Hitchspots.me just a few days before the trip, ready to be used.</p>
<p>How did it go? Well <a href="https://twitter.com/norydev/status/910821946979438593">pretty good</a>! üòÑüèÅüçæüéâ</p>
<hr />
<p>[<span id="footnotes-1">1</span>] <a href="#sup-1">‚Üë</a> If you have followed, there is also a feature to get all the spots for a country. I added it after the hitchhiking trip with my friends, for which I needed the &ldquo;spots on a route&rdquo; feature. It was, by the way painless to add, so I guess I can be proud of my architecture üí™.</p>
<p>[<span id="footnotes-2">2</span>] <a href="#sup-2">‚Üë</a> There is no url to the documentation, you need to go to the <a href="http://hitchwiki.org/maps/">maps</a> site and click API in the bottom right corner. </p>
<p>[<span id="footnotes-3">3</span>] <a href="#sup-3">‚Üë</a> It seems it is coming and going, sometimes it&rsquo;s available sometimes not. I decided to stick with MapBox for now.</p></article></body></html>